import{t,k as h,l as j,d as v,j as e,a as w,B as E}from"./App.CSUcjDxE.js";import{r}from"./index.CC7gbGQC.js";import{I as y}from"./input.DqQtVmQx.js";/* empty css                        */function L(){const l=t.useUtils(),{data:s}=t.users.getSelf.useQuery(void 0),n=s?.data.picture_url?s?.data.picture_url.replace("$CORE_HOSTNAME",window.location.hostname):null,[p,i]=r.useState(null),{get:m}=h(),o=p??s?.data.name??"",u=r.useCallback(a=>{i(a.target.value.trimStart().replace(/\s+/g," "))},[i]),c=o.split(" ").map(a=>a.trim()).filter(a=>a.length>=2).length>=2,{mutate:d,isLoading:f}=j({mutationFn:async a=>{await fetch(`http://${window.location.hostname}:12001/users/self/picture`,{method:"PUT",headers:{"Content-Type":"application/octet-stream",Authorization:`Bearer ${await m()}`},body:a.file})},onSuccess:async()=>{await l.users.getSelf.invalidate(),window.document.getElementById("name")?.focus?.()}}),[,N]=v(),{mutate:b,isLoading:g}=t.users.updateSelf.useMutation({onSuccess:async()=>{await l.users.getSelf.invalidate(),N("/")}}),x=()=>{b({name:o.trim()})};return e.jsxDEV("div",{className:"max-w-screen-sm mx-auto px-4 flex flex-col justify-center space-y-6",children:[e.jsxDEV("h1",{className:"text-4xl py-16 md:py-16 font-regular text-stone-600 leading-0",children:"üé≠ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Profile ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"image",className:"cursor-pointer",children:[e.jsxDEV("div",{className:"font-bold text-lg",children:"Picture"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:86,columnNumber:21},this),e.jsxDEV("div",{className:"text-stone-600",children:"‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø upload ‡¶ï‡¶∞‡ßÅ‡¶®"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:87,columnNumber:21},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:85,columnNumber:17},this),e.jsxDEV("div",{className:w("w-32 h-32 flex justify-center items-center rounded-full border-8 relative cursor-pointer bg-contain bg-center"),style:n?{backgroundImage:`url('${n}')`}:{},children:[f?e.jsxDEV("div",{className:"animate-spin border-4 border-b-transparent border-l-transparent border-red-500 w-8 h-8 rounded-full"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:103,columnNumber:25},this):e.jsxDEV("span",{className:"text-5xl text-stone-400 drop-shadow-sm",children:"+"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:108,columnNumber:25},this),e.jsxDEV("input",{id:"image",type:"file",className:"w-full h-full opacity-0 absolute top-0 left-0 cursor-pointer",accept:"image/*",onChange:a=>{a.target.files?.length&&d({file:a.target.files[0]})}},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:116,columnNumber:21},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:84,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"name",children:[e.jsxDEV("div",{className:"font-bold text-lg",children:"Your Full Name"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:133,columnNumber:21},this),e.jsxDEV("div",{className:"text-stone-600",children:"‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:134,columnNumber:21},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV(y,{placeholder:"‡¶∞‡¶æ‡¶ï‡¶ø‡¶¨ ‡¶Ü‡¶≤ ‡¶π‡¶æ‡¶∏‡¶æ‡¶®",id:"name",className:"bg-white text-xl py-8",value:o,onChange:u},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:136,columnNumber:17},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:131,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-row justify-end",children:e.jsxDEV(E,{size:"lg",disabled:!c||g,className:"w-full md:w-2/4",onClick:x,children:"Complete ‚Äî ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:145,columnNumber:17},this)},void 0,!1,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"/mono/apps/jonogon-web/src/app/pages/profile/update.tsx",lineNumber:77,columnNumber:9},this)}export{L as default};
